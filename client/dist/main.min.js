!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=angular.module("florentindubois.filemanager",["ngAnimate","ngAria","ngMaterial","ngMessages","ngRoute","ngSanitize","pascalprecht.translate","md.data.table"]);r.config(["$routeProvider",function(e){var t=[{path:"/fs",controller:"fs",templateUrl:"views/fs.jade"},{path:"/manage-account",controller:"manageAccount",templateUrl:"views/manage-account.jade"}];for(var n in t)e.when(t[n].path,{controller:"filemanager."+t[n].controller,templateUrl:t[n].templateUrl});e.otherwise("/fs")}]),r.config(["$translateProvider",function(e){var t=["en"];for(var r in t)e.translations(t[r],n(2)("./"+t[r]+".lang.json"));e.useSanitizeValueStrategy(null),e.preferredLanguage("en"),e.fallbackLanguage("en")}]),r.controller("filemanager.fs",["$scope","$http","$translate","$mdToast",function(e,t,n,r){e.foldersSelected=[],e.filesSelected=[],e.path="/",e.formatPath=function(e){e=e.replace(/\/\//gi,"/");for(var t=e.split("/"),n=[],r=0;r<t.length;++r)r+1<t.length&&".."===t[r+1]||".."!==t[r]&&n.push(t[r]);return e=n.join("/"),""===e&&(e="/"),e},e.location=function(o){o=e.formatPath(o),t.get("/fs/info"+o).then(function(t){e.folders=t.data.folders,e.files=t.data.files,e.foldersSelected=[],e.filesSelected=[],e.path=o},function(){n("request.failure").then(function(e){r.showSimple(e)})})},e.location("/")}]),r.controller("filemanager.login",["$scope","$http","$translate","$mdToast","$window",function(e,t,n,r,o){e.submit=function(){return t.post("/log",e.login).then(function(e){return e.data.login?void o.location.assign(e.data.redirect):n("login.wrong").then(function(e){r.showSimple(e)})},function(e){return 403!==e.status&&e.data.login?void n("request.failure").then(function(e){r.showSimple(e)}):n("login.wrong").then(function(e){r.showSimple(e)})}),!1}}]),r.controller("filemanager.manageAccount",["$scope","$http","$translate","$mdToast",function(e,t,n,r){e.users=[],e.getUsers=function(){t.get("users").then(function(t){e.users=t.data,e.updateUser.$setPristine(),e.updateUser.$setUntouched(),e.user={}},function(e){return 403===e.status?n("request.authorized").then(function(e){r.showSimple(e)}):void n("request.failure").then(function(e){r.showSimple(e)})})},e.select=function(t){e.user=e.users[t]},e.add=function(){e.users.push({}),e.select(e.users.length-1)},e.remove=function(o){t["delete"]("users/"+e.users[o]._id).then(function(){e.getUsers()},function(e){return 403===e.status?n("request.authorized").then(function(e){r.showSimple(e)}):void n("request.failure").then(function(e){r.showSimple(e)})})},e.save=function(){return e.user._id?t.put("users",e.user).then(function(){n("manageAccount.success").then(function(t){r.showSimple(t),e.getUsers()})},function(e){return 403===e.status?n("request.authorized").then(function(e){r.showSimple(e)}):void n("request.failure").then(function(e){r.showSimple(e)})}):t.post("users",e.user).then(function(){e.getUsers()},function(e){return 403===e.status?n("request.authorized").then(function(e){r.showSimple(e)}):void n("request.failure").then(function(e){r.showSimple(e)})}),!1},e.getUsers()}]),r.controller("filemanager.navigation",["$scope","$http","$window","$translate","$mdToast","$mdSidenav",function(e,t,n,r,o,i){e.user=[],e.signets=[],e.openSidenav=function(){i("left").toggle()},e.exit=function(){t["delete"]("log").then(function(e){return e.data.success?void n.location.assign(e.data.redirect):r("request.failure").then(function(e){o.showSimple(e)})},function(){r("request.failure").then(function(e){o.showSimple(e)})})},t.get("sidenav/user").then(function(t){e.user=t.data},function(){r("request.failure").then(function(e){o.showSimple(e)})}),t.get("sidenav/signet").then(function(t){e.signets=t.data},function(){r("request.failure").then(function(e){o.showSimple(e)})})}]),r.filter("bytes",[function(){return function(e){if(e){var t=1,n=["o","Ko","Mo","Go","To","Po"],r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(r))).toFixed(t)+" "+n[r]}return e}}]),r.filter("lower",[function(){return function(e){return e?e.toLowerCase():e}}]),r.filter("truncate",[function(){return function(e,t){return e&&(t||(t=40),e.length>t)?e.substring(0,t-3)+"...":e}}]),r.filter("ucfirst",[function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substring(1):e}}]),r.filter("upper",[function(){return function(e){return e?e.toUpperCase():e}}]),r.run(["$rootScope","$http","$location","$translate","$mdToast",function(e,t,n,r,o){var i=["/manage-account"];e.$on("$routeChangeStart",function(){-1!==i.indexOf(n.path())&&t.get("user").then(function(e){e.data.administrator||r("request.authorized").then(function(e){o.showSimple(e),n.path("/fs")})},function(e){return 403===e.status?r("request.authorized").then(function(e){o.showSimple(e)}):void r("request.failure").then(function(e){o.showSimple(e)})})})}])},function(e,t,n){function r(e){return n(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./en.lang.json":3};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=2},function(e,t){e.exports={app:{name:"Kraken"},request:{failure:"An error has occured, please try later",authorized:"You are not authorized to do this action"},login:{username:"Username",password:"Password",send:"Sign in",wrong:"Wrong username or password",error:{required:"This field is required"}},toolbar:{exit:"Exit"},navigation:{manageAccount:"Manage account",fs:"File system"},manageAccount:{username:"User name",password:"Password",firstname:"First name",lastname:"Last name",email:"Mail",administrator:"His an administrator ?",submit:"Save",remove:"Remove",userInformation:"User information",userInformationComplete:"Complete information about user",selectUser:"Select user to modify",addAdministrator:"Create a new user",success:"Successful save user",error:{required:"This is required.",email:"This is not a correct email."}},fs:{folder:"Folder(s)",file:"File(s)",download:"Download",open:"Open",name:"Name",right:"Right",action:"Action",mime:"Mime-type",size:"Size","delete":"Delete",lastModified:"Last modified",selected:"Item(s) selected",share:"Share",archive:"Compress",parent:"Parent",createNewFolder:"Create new folder",moreOptions:"More options",refresh:"Refresh",rename:"Rename",unarchive:"Decompress",bookmarks:"Bookmarks"}}}]);