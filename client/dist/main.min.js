!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r;r=angular.module("florentindubois.kraken",["ngAria","ngAnimate","ngMaterial","ngMessages","ngRoute","ngSanitize","pascalprecht.translate"]),r.config(["$routeProvider",function(e){var t,n,r;r=[{path:"/fs",controller:"fs",templateUrl:"views/fs.jade"},{path:"/fs/:path",controller:"fs",templateUrl:"views/fs.jade"},{path:"/manage-account",controller:"manageAccount",templateUrl:"views/manage-account.jade"}];for(t in r)n=r[t],e.when(n.path,{controller:"kraken."+n.controller,templateUrl:n.templateUrl});e.otherwise("/fs")}]),r.config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue",{"default":"900"}).accentPalette("pink").warnPalette("red")}]),r.config(["$translateProvider",function(e){var t,r,o,u;for(o=["en"],t=0,u=o.length;u>t;t++)r=o[t],e.translations(r,n(2)("./"+r+".lang.json"));e.useSanitizeValueStrategy(null),e.preferredLanguage("en"),e.fallbackLanguage("en")}]),r.controller("kraken.fs",["$scope","$routeParams","$fileSystem","$bookmarks","$logger",function(e,t,n,r,o){e.path=null!=t.path?t.path:"/",e.dirnames=e.path.split("/"),e.realpath=function(e){var t,n,r,o;e=e.replace(/\/\//gi,"/"),n=e.split("/"),r=[];for(o in n)t=n[o],o+1<n.length&&".."===n[o+1]||".."!==t&&r.push(t);return 0===r.length?"/":r.join("/")},e.level=function(e,t){var n,r,o,u;r=e.split("/"),u=[];for(o in r){if(n=r[o],!(t>o))return 0===u.length?"/":lfpath.join("/");u.push(n)}},e.open=function(t){return e.path=t,e.dirnames=t.split("/"),n.get(t,function(t,n){return null==t?(e.files=n.files,e.folders=n.folders):void 0})},e.location=function(t){return e.open(e.realpath(e.path+"/"+t))},e.bookmark=function(t){return r.create(e.realpath(e.path+"/"+t),function(e,t){return null==e&&t.created?$translate("fs.bookmarkCreated").then(function(e){return o.info(e)}):void 0})},e.open(e.path)}]),r.controller("kraken.login",["$scope","$user","$logger","$translate","$window","$timeout",function(e,t,n,r,o,u){e.login={},e.submit=function(){return t.login(e.login.username,e.login.password,function(e,t){return null!=e?n.error(e.mmessage):t.connected?r("login.success").then(function(e){return n.info(e),u(function(){return o.location.assign(t.redirect)},1e3)}):r("login.wrong").then(function(e){return n.error(e)})}),!1}}]),r.controller("kraken.manageAccount",["$scope","$user","$translate","$logger",function(e,t,n,r){e.users=[],e.user={},e.getUsers=function(){return t.getAll(function(t,n){return null==t?(e.users=n,e.updateUser.$setPristine(),e.updateUser.$setUntouched(),e.user={}):void 0})},e.select=function(t){return e.user=e.users[t]},e.add=function(){return e.users.push({}),e.select(e.users.length-1)},e.remove=function(o){return t.remove(e.users[o]._id,function(t,o){return null==t&&o.removed===!0?n("manageAccount.removed").then(function(t){return r.info(t),e.getUsers()}):void 0})},e.save=function(){return null!=e.user._id?t.update(e.user,function(t,o){return null==t&&o.updated===!0?n("manageAccount.updated").then(function(t){return r.info(t),e.getUsers()}):void 0}):t.create(e.user,function(t,o){return null==t&&o.created===!0?n("manageAccount.created").then(function(t){return r.info(t),e.getUsers()}):void 0})},e.getUsers()}]),r.controller("kraken.navigation",["$scope","$user","$window","$mdSidenav","$menu","$bookmarks","$translate","$logger",function(e,t,n,r,o,u,i,s){e.menu=[],e.bookmarks=[],e.openSidenav=function(){return r("left").toggle()},e.exit=function(){return t.logout(function(e,t){return null==e&&null!=t.redirect?n.location.assign(t.redirect):void 0})},e.removeBookmark=function(t){return u.remove(t,function(t,n){return null==t&&n.removed?i("navigation.removeBookmark").then(function(t){return s.info(t),e.getBookmarks()}):void 0})},e.getBookmarks=function(){return u.getAll(function(t,n){return null==t?e.bookmarks=n:void 0})},e.getBookmarks(),o.getItems(function(t,n){return null==t?e.menu=n:void 0})}]),r.filter("bytes",[function(){return function(e,t){var n,r;return null==t&&(t=1),e&&(r=["o","Ko","Mo","Go","To","Po"],n=Math.floor(Math.log(e)/Math.log(1024)),e=(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+r[n]),e}}]),r.filter("lower",[function(){return function(e){return null!=e&&(e=e.toLowerCase()),e}}]),r.filter("truncate",[function(){return function(e,t){return null==t&&(t=40),null!=e&&t<e.length&&(e=e.substring(0,t-3)+"..."),e}}]),r.filter("ucfirst",[function(){return function(e){return null!=e&&(e=""+e.charAt(0).toUpperCase()+e.substring(1)),e}}]),r.filter("upper",[function(){return function(e){return null!=e&&(e=e.toUpperCase()),e}}]),r.run(["$rootScope","$location","$user","$translate","$logger",function(e,t,n,r,o){var u;u=["/manage-account"],e.$on("$routeChangeStart",function(){return-1!==u.indexOf(t.path())?n.isAdministrator(function(e,n){return null!=e||n.administrator?void 0:r("request.notAuthorized").then(function(e){return o.error(e),t.path("/fs")})}):void 0})}]),r.service("$bookmarks",["$request",function(e){this.get=function(t,n){return e.get("/bookmarks/"+t,n)},this.getAll=function(t){return e.get("/bookmarks",t)},this.create=function(t,n){return e.post("/bookmarks",{path:t},n)},this.update=function(t,n,r){return e.put("/bookmarks/"+t,{path:n},r)},this.remove=function(t,n){return e["delete"]("/bookmarks/"+t,n)},this.removeAll=function(t){return e["delete"]("/bookmarks",t)}}]),r.service("$fileSystem",["$request",function(e){this.get=function(t,n){return e.get("/file-system/info/"+t,n)}}]),r.service("$logger",["$mdToast",function(e){this.info=function(t){return e.show(e.simple().textContent(t))},this.warn=function(t){return e.show(e.simple().textContent(t))},this.error=function(t){return e.show(e.simple().textContent(t))}}]),r.service("$menu",["$request",function(e){this.getItems=function(t){return e.get("/menu",t)}}]),r.service("$request",["$http","$logger","$translate",function(e,t,n){var r;r=function(e,r){return 403===e.status?n("request.notAuthorized").then(function(e){return t.error(e),r(new Error(e))}):404===e.status?n("request.notFound").then(function(e){return t.error(e),r(new Error(e))}):n("request.failure").then(function(e){return t.error(e),r(new Error(e))})},this.get=function(t,n){return e.get(t).then(function(e){return n(null,e.data)},function(e){return r(e,n)})},this.post=function(t,n,o){return e.post(t,n).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this.put=function(t,n,o){return e.put(t,n).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this.patch=function(t,n,o){return e.patch(t,n).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this["delete"]=function(t,n){return e["delete"](t).then(function(e){return n(null,e.data)},function(e){return r(e,n)})}}]),r.service("$user",["$request",function(e){this.get=function(t,n){return e.get("/users/"+t,n)},this.update=function(t,n){return e.put("/users/"+t._id,t,n)},this.remove=function(t,n){return e["delete"]("/users/"+t,n)},this.create=function(t,n){return e.post("/users",t,n)},this.getAll=function(t){return e.get("/users",t)},this.isLog=function(t){return e.get("/log",t)},this.login=function(t,n,r){return e.post("/log",{username:t,password:n},r)},this.logout=function(t){return e["delete"]("/log",t)},this.isAdministrator=function(t){return e.get("/administrator",t)}}])},function(e,t,n){function r(e){return n(o(e))}function o(e){return u[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var u={"./en.lang.json":3};r.keys=function(){return Object.keys(u)},r.resolve=o,e.exports=r,r.id=2},function(e,t){e.exports={app:{name:"Kraken"},toolbar:{exit:"Exit"},navigation:{fs:"File system",manageAccount:"Manage account",menu:"Menu",removeBookmark:"Successfuly removed bookmark",bookmark:{singular:"Bookmark",plural:"Bookmarks"}},request:{failure:"Request failure",notAuthorized:"Your are not authorized to perform this action",notFound:"Request document is not found"},login:{send:"Sign in",username:"Username",password:"Password",success:"Successfully connected",wrong:"Wrong password or username",error:{required:"This field is required"}},manageAccount:{username:"User name",password:"Password",firstname:"First name",lastname:"Last name",email:"Mail",administrator:"His an administrator ?",submit:"Save",remove:"Remove",userInformation:"User information",userInformationComplete:"Complete information about user",selectUser:"Select user to modify",addAdministrator:"Create a new user",removed:"Successfuly removed an user",updated:"Successfuly updated an user",created:"Successfuly created an user",error:{required:"This is required.",email:"This is not a correct email."}},fs:{goToRoot:"Go to root folder",root:"Root",folder:"Folder(s)",file:"File(s)",download:"Download",open:"Open",name:"Name",right:"Right",action:"Action",mime:"Mime-type",size:"Size","delete":"Delete",lastModified:"Last modified",selected:"Item(s) selected",share:"Share",archive:"Compress",parent:"Parent",createNewFolder:"Create new folder",moreOptions:"More options",refresh:"Refresh",rename:"Rename",unarchive:"Decompress",bookmarks:"Bookmarks",bookmarkCreated:"Bookmark created"}}}]);