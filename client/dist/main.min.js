!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var r;r=angular.module("florentindubois.kraken",["ngAria","ngAnimate","ngMaterial","ngMessages","ngRoute","ngSanitize","pascalprecht.translate"]),r.config(["$routeProvider",function(e){var n,t,r;r=[{path:"/fs",controller:"fs",templateUrl:"views/fs.jade"},{path:"/fs/:path",controller:"fs",templateUrl:"views/fs.jade"},{path:"/manage-account",controller:"manageAccount",templateUrl:"views/manage-account.jade"}];for(n in r)t=r[n],e.when(t.path,{controller:"kraken."+t.controller,templateUrl:t.templateUrl});e.otherwise("/fs")}]),r.config(["$mdThemingProvider",function(e){return e.theme("default").primaryPalette("blue",{"default":"900"}).accentPalette("pink").warnPalette("red")}]),r.config(["$translateProvider",function(e){var n,r,o,u;for(o=["en"],n=0,u=o.length;u>n;n++)r=o[n],e.translations(r,t(2)("./"+r+".lang.json"));return e.useSanitizeValueStrategy(null),e.preferredLanguage("en"),e.fallbackLanguage("en")}]),r.controller("kraken.fs",["$routeParams",function(e){var n;n=null!=e.path?e.path:"/"}]),r.controller("kraken.login",["$scope","$user","$logger","$translate","$window","$timeout",function(e,n,t,r,o,u){e.login={},e.submit=function(){return n.login(e.login.username,e.login.password,function(e,n){return null!=e?t.error(e.mmessage):n.connected?r("login.success").then(function(e){return t.info(e),u(function(){return o.location.assign(n.redirect)},1e3)}):r("login.wrong").then(function(e){return t.error(e)})}),!1}}]),r.controller("kraken.manageAccount",["$scope","$user","$translate","$logger",function(e,n,t,r){e.users=[],e.user={},e.getUsers=function(){return n.getAll(function(n,t){return null==n?(e.users=t,e.updateUser.$setPristine(),e.updateUser.$setUntouched(),e.user={}):void 0})},e.select=function(n){return e.user=e.users[n]},e.add=function(){return e.users.push({}),e.select(e.users.length-1)},e.remove=function(o){return n.remove(e.users[o]._id,function(n,o){return null==n&&o.removed===!0?t("manageAccount.removed").then(function(n){return r.info(n),e.getUsers()}):void 0})},e.save=function(){return null!=e.user._id?n.update(e.user,function(n,o){return null==n&&o.updated===!0?t("manageAccount.updated").then(function(n){return r.info(n),e.getUsers()}):void 0}):n.create(e.user,function(n,o){return null==n&&o.created===!0?t("manageAccount.created").then(function(n){return r.info(n),e.getUsers()}):void 0})},e.getUsers()}]),r.controller("kraken.navigation",["$scope","$user","$window","$mdSidenav","$menu","$bookmarks","$translate","$logger",function(e,n,t,r,o,u,i,s){e.menu=[],e.bookmarks=[],e.openSidenav=function(){return r("left").toggle()},e.exit=function(){return n.logout(function(e,n){return null==e&&null!=n.redirect?t.location.assign(n.redirect):void 0})},e.removeBookmark=function(n){return u.remove(n,function(n,t){return null==n&&t.removed?i("navigation.removeBookmark").then(function(n){return s.info(n),e.getBookmarks()}):void 0})},e.getBookmarks=function(){return u.getAll(function(n,t){return null==n?e.bookmarks=t:void 0})},e.getBookmarks(),o.getItems(function(n,t){return null==n?e.menu=t:void 0})}]),r.filter("bytes",[function(){return function(e,n){var t,r;return null==n&&(n=1),e&&(r=["o","Ko","Mo","Go","To","Po"],t=Math.floor(Math.log(e)/Math.log(1024)),e=(e/Math.pow(1024,Math.floor(t))).toFixed(n)+" "+r[t]),e}}]),r.filter("lower",[function(){return function(e){return null!=e&&(e=e.toLowerCase()),e}}]),r.filter("truncate",[function(){return function(e,n){return null==n&&(n=40),null!=e&&(e=e.substring(0,n-3)+"..."),e}}]),r.filter("ucfirst",[function(){return function(e){return null!=e&&(e=""+e.charAt(0).toUpperCase()+e.substring(1)),e}}]),r.filter("upper",[function(){return function(e){return null!=e&&(e=e.toUpperCase()),e}}]),r.run(["$rootScope","$location","$user","$translate","$logger",function(e,n,t,r,o){var u;u=["/manage-account"],e.$on("$routeChangeStart",function(){return-1!==u.indexOf(n.path())?t.isAdministrator(function(e,t){return null!=e||t.administrator?void 0:r("request.notAuthorized").then(function(e){return o.error(e),n.path("/fs")})}):void 0})}]),r.service("$bookmarks",["$request",function(e){this.get=function(n,t){return e.get("/bookmarks/"+n,t)},this.getAll=function(n){return e.get("/bookmarks",n)},this.create=function(n,t){return e.post("/bookmarks",{path:n},t)},this.update=function(n,t,r){return e.put("/bookmarks/"+n,{path:t},r)},this.remove=function(n,t){return e["delete"]("/bookmarks/"+n,t)},this.removeAll=function(n){return e["delete"]("/bookmarks",n)}}]),r.service("$fileSystem",["$request",function(e){}]),r.service("$logger",["$mdToast",function(e){this.info=function(n){return e.show(e.simple().textContent(n))},this.warn=function(n){return e.show(e.simple().textContent(n))},this.error=function(n){return e.show(e.simple().textContent(n))}}]),r.service("$menu",["$request",function(e){this.getItems=function(n){return e.get("/menu",n)}}]),r.service("$request",["$http","$logger","$translate",function(e,n,t){var r;r=function(e,r){return 403===e.status?t("request.notAuthorized").then(function(e){return n.error(e),r(new Error(e))}):404===e.status?t("request.notFound").then(function(e){return n.error(e),r(new Error(e))}):t("request.failure").then(function(e){return n.error(e),r(new Error(e))})},this.get=function(n,t){return e.get(n).then(function(e){return t(null,e.data)},function(e){return r(e,t)})},this.post=function(n,t,o){return e.post(n,t).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this.put=function(n,t,o){return e.put(n,t).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this.patch=function(n,t,o){return e.patch(n,t).then(function(e){return o(null,e.data)},function(e){return r(e,o)})},this["delete"]=function(n,t){return e["delete"](n).then(function(e){return t(null,e.data)},function(e){return r(e,t)})}}]),r.service("$user",["$request",function(e){this.get=function(n,t){return e.get("/users/"+n,t)},this.update=function(n,t){return e.put("/users/"+n._id,n,t)},this.remove=function(n,t){return e["delete"]("/users/"+n,t)},this.create=function(n,t){return e.post("/users",n,t)},this.getAll=function(n){return e.get("/users",n)},this.isLog=function(n){return e.get("/log",n)},this.login=function(n,t,r){return e.post("/log",{username:n,password:t},r)},this.logout=function(n){return e["delete"]("/log",n)},this.isAdministrator=function(n){return e.get("/administrator",n)}}])},function(e,n,t){function r(e){return t(o(e))}function o(e){return u[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var u={"./en.lang.json":3};r.keys=function(){return Object.keys(u)},r.resolve=o,e.exports=r,r.id=2},function(e,n){e.exports={app:{name:"Kraken"},toolbar:{exit:"Exit"},navigation:{fs:"File system",manageAccount:"Manage account",menu:"Menu",removeBookmark:"Successfuly removed bookmark",bookmark:{singular:"Bookmark",plural:"Bookmarks"}},request:{failure:"Request failure",notAuthorized:"Your are not authorized to perform this action",notFound:"Request document is not found"},login:{send:"Sign in",username:"Username",password:"Password",success:"Successfully connected",wrong:"Wrong password or username",error:{required:"This field is required"}},manageAccount:{username:"User name",password:"Password",firstname:"First name",lastname:"Last name",email:"Mail",administrator:"His an administrator ?",submit:"Save",remove:"Remove",userInformation:"User information",userInformationComplete:"Complete information about user",selectUser:"Select user to modify",addAdministrator:"Create a new user",removed:"Successfuly removed an user",updated:"Successfuly updated an user",created:"Successfuly created an user",error:{required:"This is required.",email:"This is not a correct email."}}}}]);