!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var r=angular.module("florentindubois.filemanager",["ngAnimate","ngAria","ngMaterial","ngMessages","ngRoute","ngSanitize","pascalprecht.translate","md.data.table"]);r.config(["$routeProvider",function(e){var n=[{path:"/fs",controller:"fs",templateUrl:"views/fs.jade"},{path:"/manage-account",controller:"manageAccount",templateUrl:"views/manage-account.jade"}];for(var t in n)e.when(n[t].path,{controller:"filemanager."+n[t].controller,templateUrl:n[t].templateUrl});e.otherwise("/fs")}]),r.config(["$translateProvider",function(e){var n=["en"];for(var r in n)e.translations(n[r],t(2)("./"+n[r]+".lang.json"));e.useSanitizeValueStrategy(null),e.preferredLanguage("en"),e.fallbackLanguage("en")}]),r.controller("filemanager.fs",[function(){}]),r.controller("filemanager.login",["$scope","$translate","$logger","$window","$login",function(e,n,t,r,o){e.submit=function(){return o.signin(e.login.username,e.login.password,function(e,o){if(!e){if(!o.login)return n("login.wrong").then(function(e){t.error(e)});r.location.assign(o.redirect)}}),!1}}]),r.controller("filemanager.manageAccount",["$scope","$http","$translate","$mdToast",function(e,n,t,r){e.users=[],e.getUsers=function(){n.get("users").then(function(n){e.users=n.data,e.updateUser.$setPristine(),e.updateUser.$setUntouched(),e.user={}},function(e){return 403===e.status?t("request.authorized").then(function(e){r.showSimple(e)}):void t("request.failure").then(function(e){r.showSimple(e)})})},e.select=function(n){e.user=e.users[n]},e.add=function(){e.users.push({}),e.select(e.users.length-1)},e.remove=function(o){n["delete"]("users/"+e.users[o]._id).then(function(){e.getUsers()},function(e){return 403===e.status?t("request.authorized").then(function(e){r.showSimple(e)}):void t("request.failure").then(function(e){r.showSimple(e)})})},e.save=function(){return e.user._id?n.put("users",e.user).then(function(){t("manageAccount.success").then(function(n){r.showSimple(n),e.getUsers()})},function(e){return 403===e.status?t("request.authorized").then(function(e){r.showSimple(e)}):void t("request.failure").then(function(e){r.showSimple(e)})}):n.post("users",e.user).then(function(){e.getUsers()},function(e){return 403===e.status?t("request.authorized").then(function(e){r.showSimple(e)}):void t("request.failure").then(function(e){r.showSimple(e)})}),!1},e.getUsers()}]),r.controller("filemanager.navigation",["$scope","$login","$sidenav","$window","$mdSidenav",function(e,n,t,r,o){e.menu=[],e.signets=[],e.openSidenav=function(){o("left").toggle()},e.exit=function(){n.logout(function(e,n){!e&&n.success&&r.location.assign(n.redirect)})},t.getUserMenu(function(n,t){n||(e.menu=t)}),t.getUserSignet(function(n,t){n||(e.signets=t)})}]),r.filter("bytes",[function(){return function(e){if(e){var n=1,t=["o","Ko","Mo","Go","To","Po"],r=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(r))).toFixed(n)+" "+t[r]}return e}}]),r.filter("lower",[function(){return function(e){return e?e.toLowerCase():e}}]),r.filter("truncate",[function(){return function(e,n){return e&&(n||(n=40),e.length>n)?e.substring(0,n-3)+"...":e}}]),r.filter("ucfirst",[function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substring(1):e}}]),r.filter("upper",[function(){return function(e){return e?e.toUpperCase():e}}]),r.run(["$rootScope","$http","$location","$translate","$mdToast",function(e,n,t,r,o){var i=["/manage-account"];e.$on("$routeChangeStart",function(){-1!==i.indexOf(t.path())&&n.get("user").then(function(e){e.data.administrator||r("request.authorized").then(function(e){o.showSimple(e),t.path("/fs")})},function(e){return 403===e.status?r("request.authorized").then(function(e){o.showSimple(e)}):void r("request.failure").then(function(e){o.showSimple(e)})})})}]),r.service("$logger",["$translate","$mdToast",function(e,n){this.info=function(e){n.show(n.simple().textContent(e))},this.error=function(e){n.show(n.simple().textContent(e))}}]),r.service("$login",["$request",function(e){this.signin=function(n,t,r){e.post("/log",{username:n,password:t},r)},this.logout=function(n){e["delete"]("/log",n)}}]),r.service("$request",["$http","$logger","$translate",function(e,n,t){function r(e,r){return 403===e.status?t("request.authorized").then(function(e){n.error(e),r(new Error(e))}):void t("request.failure").then(function(e){n.error(e),r(new Error(e))})}this.get=function(n,t){e.get(n).then(function(e){t(null,e.data)},function(e){r(e,t)})},this.post=function(n,t,o){e.post(n,t).then(function(e){o(null,e.data)},function(e){r(e,o)})},this.put=function(n,t,o){e.put(n,t).then(function(e){o(null,e.data)},function(e){r(e,o)})},this["delete"]=function(n,t){e["delete"](n).then(function(e){t(null,e.data)},function(e){r(e,t)})}}]),r.service("$sidenav",["$request",function(e){this.getUserMenu=function(n){e.get("sidenav/user",n)},this.getUserSignet=function(n){e.get("sidenav/signet",n)}}])},function(e,n,t){function r(e){return t(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./en.lang.json":3};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=2},function(e,n){e.exports={app:{name:"Kraken"},request:{failure:"An error has occured, please try later",authorized:"You are not authorized to do this action"},login:{username:"Username",password:"Password",send:"Sign in",wrong:"Wrong username or password",error:{required:"This field is required"}},toolbar:{exit:"Exit"},navigation:{manageAccount:"Manage account",fs:"File system"},manageAccount:{username:"User name",password:"Password",firstname:"First name",lastname:"Last name",email:"Mail",administrator:"His an administrator ?",submit:"Save",remove:"Remove",userInformation:"User information",userInformationComplete:"Complete information about user",selectUser:"Select user to modify",addAdministrator:"Create a new user",success:"Successful save user",error:{required:"This is required.",email:"This is not a correct email."}},fs:{folder:{singular:"Folder",plural:"Folders"},file:{singular:"File",plural:"Files"},selected:{singular:"Item selected",plural:"Items selected"},download:"Download",open:"Open",name:"Name",right:"Right",action:"Action",mime:"Mime-type",size:"Size","delete":"Delete",lastModified:"Last modified",share:"Share",archive:"Compress",parent:"Parent",createNewFolder:"Create new folder",moreOptions:"More options",refresh:"Refresh",rename:"Rename",unarchive:"Decompress",bookmarks:"Bookmarks"}}}]);